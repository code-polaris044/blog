---
import { siteMeta } from "@lib/constants";
const { siteBgm } = siteMeta;
const siteBgmURL = new URL(siteBgm, siteMeta.siteUrl).href; // siteMeta.siteUrlを使用
console.log('bgmurl', siteBgmURL);
---

<button id="playButton">Sound ON</button>
<script>
import { Howl } from 'howler';

// siteBgmURLをスクリプト内で使用できるようにする
const siteBgmURL = "{{ siteBgmURL }}"; // ここでURLを展開

// Howlオブジェクトを初期化
const sound = new Howl({
  src: [siteBgmURL], // 正しいURLを指定
  autoplay: false,
  loop: false,
  volume: 1.0,
});

// 再生状態を管理するフラグ
let isPlaying = false;

// ボタンのクリックイベントにリスナーを追加
document.getElementById('playButton').addEventListener('click', () => {
  if (isPlaying) {
    sound.pause();  // 音声を一時停止
  } else {
    sound.play();   // 音声を再生
  }
  isPlaying = !isPlaying; // 再生状態を反転
});
</script>
